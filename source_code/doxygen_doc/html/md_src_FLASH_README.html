<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Mooltipass: README</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="0_Mooltipass.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Mooltipass
   </div>
   <div id="projectbrief">Offline Password Keeper</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">README </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>#Flash Memory Library for Mooltipass Michael Neiderhauser Jun-15-2014</p>
<p>Files:</p><ul>
<li><a class="el" href="flash__mem_8c.html" title="Mooltipass Flash IC Library Created: 31/3/2014 Author: Michael Neiderhauser. ">flash_mem.c</a></li>
<li><a class="el" href="flash__mem_8h.html" title="Mooltipass Flash IC Library Header Created: 31/3/2014 Author: Michael Neiderhauser. ">flash_mem.h</a></li>
</ul>
<p>The Flash Library was written to add an access layer to write to the SPI flash. Currently the library only permits reading and writing pages and offsets of pages meaning that the library does not support writing over page boundaries.</p>
<p>The Flash Library allows usage of a subset of the Adesto family of SPI flash chips. The Flash Library supports the following chips:</p><ul>
<li>1M (AT45DB011D) - (512 Pages at 264 Bytes Per Page)</li>
<li>2M (AT45DB021E) - (1024 Pages at 264 Bytes Per Page)</li>
<li>4M (AT45DB041E) - (2048 Pages at 264 Bytes Per Page)</li>
<li>8M (AT45DB081E) - (4096 Pages at 264 Bytes Per Page)</li>
<li>16M (AT45DB161E) - (4096 Pages at 528 Bytes Per Page)</li>
<li>32M (AT45DB321E) - (8192 Pages at 264 Bytes Per Page)</li>
</ul>
<p>To select a chip. Open the <a class="el" href="flash__mem_8h.html" title="Mooltipass Flash IC Library Header Created: 31/3/2014 Author: Michael Neiderhauser. ">flash_mem.h</a> file and change the FLASH_CHIP define.</p>
<p>The library currently implements the following:</p><ul>
<li>Initialise the Flash (sets up SPI communications)</li>
<li>Send SPI data to the FLASH (R/W)</li>
<li>Check the Flash Chip 'Ready' Register</li>
<li>Check the Manf. Flash ID</li>
<li>Sector Erase (Zero Sector)</li>
<li>Sector Erase (All other Sectors)</li>
<li>Block Erase</li>
<li>Page Erase</li>
<li>Format Flash Similar to a chip erase, this implementation uses the Sector Erase Library Functions to format the flash.</li>
<li>Write Data To Flash (Page + Offset. Write Buffer)</li>
<li>Read Data From Flash (Page + Offset. Read Buffer)</li>
</ul>
<h2>Flash Memory Testing</h2>
<p>Files:</p><ul>
<li><a class="el" href="flash__test_8c.html" title="Mooltipass Flash IC Library Test Functions Created: 31/3/2014 Author: Michael Neiderhauser. ">flash_test.c</a></li>
<li><a class="el" href="flash__test_8h.html" title="Mooltipass Flash IC Library Test Functions Header Created: 31/3/2014 Author: Michael Neiderhauser...">flash_test.h</a></li>
</ul>
<p>Flash Testing attempts to exercise the library and obtain status on the flash chip. To run Flash Testing: Include the <a class="el" href="flash__test_8h.html" title="Mooltipass Flash IC Library Test Functions Header Created: 31/3/2014 Author: Michael Neiderhauser...">flash_test.h</a> file and call the <a class="el" href="flash__test_8c.html#abe7a11c2c89e48a5ad27d288ca17be0c" title="Primary entry point for flash testing. ">flashTest()</a> Function.</p>
<p>To run Flash Testing on the Mooltipass: In the file <a class="el" href="tests_8c.html" title="Test functions Copyright [2014] [Mathieu Stephan]. ">tests.c</a> uncomment the (pound)define TEST_FLASH in the <a class="el" href="tests_8c.html#aff165efdc61cec87cd7b34439ccabfcb" title="Test functions launched before flash init. ">beforeFlashInitTests()</a> function.</p>
<p>Note: The <a class="el" href="flash__test_8c.html" title="Mooltipass Flash IC Library Test Functions Created: 31/3/2014 Author: Michael Neiderhauser. ">flash_test.c</a> file does use oled and usb libs of the Mooltipass however this should be easy to remove if needed.</p>
<h2>Library TODO's</h2>
<ul>
<li>Implement support for the 64M Flash Chip</li>
<li>Remove 'Node' specific defines (remove integration with node_mgmt library)</li>
<li>Update API to better use other flash chip operations</li>
<li>Add other functionality (based off of the data sheet) </li>
</ul>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Thu May 5 2016 10:42:40 for Mooltipass by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
