\hypertarget{flash__test_8c}{}\section{src/\+F\+L\+A\+S\+H/flash\+\_\+test.c File Reference}
\label{flash__test_8c}\index{src/\+F\+L\+A\+S\+H/flash\+\_\+test.\+c@{src/\+F\+L\+A\+S\+H/flash\+\_\+test.\+c}}


Mooltipass Flash IC Library Test Functions Created\+: 31/3/2014 Author\+: Michael Neiderhauser.  


{\ttfamily \#include \char`\"{}timer\+\_\+manager.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}oled\+\_\+wrapper.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}mooltipass.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}flash\+\_\+test.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}flash\+\_\+mem.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}node\+\_\+mgmt.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}defines.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}usb.\+h\char`\"{}}\\*
{\ttfamily \#include $<$stdint.\+h$>$}\\*
{\ttfamily \#include $<$avr/io.\+h$>$}\\*
{\ttfamily \#include $<$string.\+h$>$}\\*
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{flash__test_8c_a52033c01e5f93df36ece5634fbbd1cfe}{init\+Buffer} (uint8\+\_\+t $\ast$buffer, uint16\+\_\+t buffer\+Size, uint8\+\_\+t policy)
\begin{DoxyCompactList}\small\item\em A helper function that populates a buffer. \end{DoxyCompactList}\item 
R\+E\+T\+\_\+\+T\+Y\+PE \hyperlink{flash__test_8c_a62c30fbf29b6efe375db42d1bc52a937}{flash\+Init\+Test} (void)
\begin{DoxyCompactList}\small\item\em A Testing wrapper that tests flash init (reading manf id\textquotesingle{}s) T\+H\+IS T\+E\+ST M\+U\+ST BE R\+UN -\/$>$ Sets up S\+PI. \end{DoxyCompactList}\item 
R\+E\+T\+\_\+\+T\+Y\+PE \hyperlink{flash__test_8c_a7e0002ca7fbfefed8e480ff6b842ba9c}{flash\+Write\+Read\+Test} (uint8\+\_\+t $\ast$buffer\+In, uint8\+\_\+t $\ast$buffer\+Out, uint16\+\_\+t buffer\+Size)
\begin{DoxyCompactList}\small\item\em A Testing wrapper that tests page write, and page read. \end{DoxyCompactList}\item 
R\+E\+T\+\_\+\+T\+Y\+PE \hyperlink{flash__test_8c_a5d02757412b04bd353a2af39e1aeaf2f}{flash\+Write\+Read\+Offset\+Test} (uint8\+\_\+t $\ast$buffer\+In, uint8\+\_\+t $\ast$buffer\+Out, uint16\+\_\+t buffer\+Size)
\begin{DoxyCompactList}\small\item\em A Testing wrapper that tests page write, and page read. Uses buffer\+Size / N\+O\+D\+E\+\_\+\+S\+I\+Z\+E\+\_\+\+P\+A\+R\+E\+NT for offset calculation. \end{DoxyCompactList}\item 
R\+E\+T\+\_\+\+T\+Y\+PE \hyperlink{flash__test_8c_a3284ec27528274fdbe9fd42b980c3062}{flash\+Erase\+Page\+Test} (uint8\+\_\+t $\ast$buffer\+In, uint8\+\_\+t $\ast$buffer\+Out, uint16\+\_\+t buffer\+Size)
\begin{DoxyCompactList}\small\item\em A Testing wrapper that tests erasing all pages in flash. \end{DoxyCompactList}\item 
R\+E\+T\+\_\+\+T\+Y\+PE \hyperlink{flash__test_8c_aa58f85c782c5144f60aa90de028f8ef8}{flash\+Erase\+Block\+Test} (uint8\+\_\+t $\ast$buffer\+In, uint8\+\_\+t $\ast$buffer\+Out, uint16\+\_\+t buffer\+Size)
\begin{DoxyCompactList}\small\item\em A Testing wrapper that tests erasing all blocks in flash. \end{DoxyCompactList}\item 
R\+E\+T\+\_\+\+T\+Y\+PE \hyperlink{flash__test_8c_a94d258639fe36017f579197e854434c0}{flash\+Erase\+Sector\+X\+Test} (uint8\+\_\+t $\ast$buffer\+In, uint8\+\_\+t $\ast$buffer\+Out, uint16\+\_\+t buffer\+Size)
\begin{DoxyCompactList}\small\item\em A Testing wrapper that tests erasing S\+E\+C\+T\+O\+R\+\_\+\+S\+T\+A\+RT through S\+E\+C\+T\+O\+R\+\_\+\+E\+ND. \end{DoxyCompactList}\item 
R\+E\+T\+\_\+\+T\+Y\+PE {\bfseries flash\+Erase\+Sector\+Zero\+Test} (uint8\+\_\+t $\ast$buffer\+In, uint8\+\_\+t $\ast$buffer\+Out, uint16\+\_\+t buffer\+Size)\hypertarget{flash__test_8c_a7673dd5cd2d6c44e72afaa4c6db0746c}{}\label{flash__test_8c_a7673dd5cd2d6c44e72afaa4c6db0746c}

\item 
void \hyperlink{flash__test_8c_a4cbf61c682ff754ef0e3e6d65826ea5a}{display\+Init\+For\+Test} (void)\hypertarget{flash__test_8c_a4cbf61c682ff754ef0e3e6d65826ea5a}{}\label{flash__test_8c_a4cbf61c682ff754ef0e3e6d65826ea5a}

\begin{DoxyCompactList}\small\item\em Init O\+L\+ED S\+C\+R\+E\+EN per test. \end{DoxyCompactList}\item 
void \hyperlink{flash__test_8c_ab1073406531b134560a7b65a4abf2fca}{display\+R\+W\+Code} (R\+E\+T\+\_\+\+T\+Y\+PE ret)
\begin{DoxyCompactList}\small\item\em display Read/\+Write Return Code \end{DoxyCompactList}\item 
void \hyperlink{flash__test_8c_a5835fb27d586f2704873c4861ada82b0}{display\+Passed} (void)\hypertarget{flash__test_8c_a5835fb27d586f2704873c4861ada82b0}{}\label{flash__test_8c_a5835fb27d586f2704873c4861ada82b0}

\begin{DoxyCompactList}\small\item\em Display P\+A\+S\+S\+ED Message (with delay) \end{DoxyCompactList}\item 
void \hyperlink{flash__test_8c_a9de5bb3289eb142a0eb3e39a3d14e4b4}{display\+Failed} (void)\hypertarget{flash__test_8c_a9de5bb3289eb142a0eb3e39a3d14e4b4}{}\label{flash__test_8c_a9de5bb3289eb142a0eb3e39a3d14e4b4}

\begin{DoxyCompactList}\small\item\em Display F\+A\+I\+L\+ED Message. \end{DoxyCompactList}\item 
R\+E\+T\+\_\+\+T\+Y\+PE \hyperlink{flash__test_8c_abe7a11c2c89e48a5ad27d288ca17be0c}{flash\+Test} (void)\hypertarget{flash__test_8c_abe7a11c2c89e48a5ad27d288ca17be0c}{}\label{flash__test_8c_abe7a11c2c89e48a5ad27d288ca17be0c}

\begin{DoxyCompactList}\small\item\em Primary entry point for flash testing. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
Mooltipass Flash IC Library Test Functions Created\+: 31/3/2014 Author\+: Michael Neiderhauser. 



\subsection{Function Documentation}
\index{flash\+\_\+test.\+c@{flash\+\_\+test.\+c}!display\+R\+W\+Code@{display\+R\+W\+Code}}
\index{display\+R\+W\+Code@{display\+R\+W\+Code}!flash\+\_\+test.\+c@{flash\+\_\+test.\+c}}
\subsubsection[{\texorpdfstring{display\+R\+W\+Code(\+R\+E\+T\+\_\+\+T\+Y\+P\+E ret)}{displayRWCode(RET_TYPE ret)}}]{\setlength{\rightskip}{0pt plus 5cm}display\+R\+W\+Code (
\begin{DoxyParamCaption}
\item[{R\+E\+T\+\_\+\+T\+Y\+PE}]{ret}
\end{DoxyParamCaption}
)}\hypertarget{flash__test_8c_ab1073406531b134560a7b65a4abf2fca}{}\label{flash__test_8c_ab1073406531b134560a7b65a4abf2fca}


display Read/\+Write Return Code 


\begin{DoxyParams}{Parameters}
{\em ret} & return code \\
\hline
\end{DoxyParams}
\index{flash\+\_\+test.\+c@{flash\+\_\+test.\+c}!flash\+Erase\+Block\+Test@{flash\+Erase\+Block\+Test}}
\index{flash\+Erase\+Block\+Test@{flash\+Erase\+Block\+Test}!flash\+\_\+test.\+c@{flash\+\_\+test.\+c}}
\subsubsection[{\texorpdfstring{flash\+Erase\+Block\+Test(uint8\+\_\+t $\ast$buffer\+In, uint8\+\_\+t $\ast$buffer\+Out, uint16\+\_\+t buffer\+Size)}{flashEraseBlockTest(uint8_t *bufferIn, uint8_t *bufferOut, uint16_t bufferSize)}}]{\setlength{\rightskip}{0pt plus 5cm}flash\+Erase\+Block\+Test (
\begin{DoxyParamCaption}
\item[{uint8\+\_\+t $\ast$}]{buffer\+In, }
\item[{uint8\+\_\+t $\ast$}]{buffer\+Out, }
\item[{uint16\+\_\+t}]{buffer\+Size}
\end{DoxyParamCaption}
)}\hypertarget{flash__test_8c_aa58f85c782c5144f60aa90de028f8ef8}{}\label{flash__test_8c_aa58f85c782c5144f60aa90de028f8ef8}


A Testing wrapper that tests erasing all blocks in flash. 


\begin{DoxyParams}{Parameters}
{\em buffer\+In} & One of the two testing buffers -\/$>$ Should be size of B\+Y\+T\+E\+S\+\_\+\+P\+E\+R\+\_\+\+P\+A\+GE \\
\hline
{\em buffer\+Out} & One of the two testing buffers -\/$>$ Should be size of B\+Y\+T\+E\+S\+\_\+\+P\+E\+R\+\_\+\+P\+A\+GE \\
\hline
{\em buffer\+Size} & Should always be B\+Y\+T\+E\+S\+\_\+\+P\+E\+R\+\_\+\+P\+A\+GE \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Test Status 
\end{DoxyReturn}
\index{flash\+\_\+test.\+c@{flash\+\_\+test.\+c}!flash\+Erase\+Page\+Test@{flash\+Erase\+Page\+Test}}
\index{flash\+Erase\+Page\+Test@{flash\+Erase\+Page\+Test}!flash\+\_\+test.\+c@{flash\+\_\+test.\+c}}
\subsubsection[{\texorpdfstring{flash\+Erase\+Page\+Test(uint8\+\_\+t $\ast$buffer\+In, uint8\+\_\+t $\ast$buffer\+Out, uint16\+\_\+t buffer\+Size)}{flashErasePageTest(uint8_t *bufferIn, uint8_t *bufferOut, uint16_t bufferSize)}}]{\setlength{\rightskip}{0pt plus 5cm}flash\+Erase\+Page\+Test (
\begin{DoxyParamCaption}
\item[{uint8\+\_\+t $\ast$}]{buffer\+In, }
\item[{uint8\+\_\+t $\ast$}]{buffer\+Out, }
\item[{uint16\+\_\+t}]{buffer\+Size}
\end{DoxyParamCaption}
)}\hypertarget{flash__test_8c_a3284ec27528274fdbe9fd42b980c3062}{}\label{flash__test_8c_a3284ec27528274fdbe9fd42b980c3062}


A Testing wrapper that tests erasing all pages in flash. 


\begin{DoxyParams}{Parameters}
{\em buffer\+In} & One of the two testing buffers -\/$>$ Should be size of B\+Y\+T\+E\+S\+\_\+\+P\+E\+R\+\_\+\+P\+A\+GE \\
\hline
{\em buffer\+Out} & One of the two testing buffers -\/$>$ Should be size of B\+Y\+T\+E\+S\+\_\+\+P\+E\+R\+\_\+\+P\+A\+GE \\
\hline
{\em buffer\+Size} & Should always be B\+Y\+T\+E\+S\+\_\+\+P\+E\+R\+\_\+\+P\+A\+GE \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Test Status 
\end{DoxyReturn}
\index{flash\+\_\+test.\+c@{flash\+\_\+test.\+c}!flash\+Erase\+Sector\+X\+Test@{flash\+Erase\+Sector\+X\+Test}}
\index{flash\+Erase\+Sector\+X\+Test@{flash\+Erase\+Sector\+X\+Test}!flash\+\_\+test.\+c@{flash\+\_\+test.\+c}}
\subsubsection[{\texorpdfstring{flash\+Erase\+Sector\+X\+Test(uint8\+\_\+t $\ast$buffer\+In, uint8\+\_\+t $\ast$buffer\+Out, uint16\+\_\+t buffer\+Size)}{flashEraseSectorXTest(uint8_t *bufferIn, uint8_t *bufferOut, uint16_t bufferSize)}}]{\setlength{\rightskip}{0pt plus 5cm}flash\+Erase\+Sector\+X\+Test (
\begin{DoxyParamCaption}
\item[{uint8\+\_\+t $\ast$}]{buffer\+In, }
\item[{uint8\+\_\+t $\ast$}]{buffer\+Out, }
\item[{uint16\+\_\+t}]{buffer\+Size}
\end{DoxyParamCaption}
)}\hypertarget{flash__test_8c_a94d258639fe36017f579197e854434c0}{}\label{flash__test_8c_a94d258639fe36017f579197e854434c0}


A Testing wrapper that tests erasing S\+E\+C\+T\+O\+R\+\_\+\+S\+T\+A\+RT through S\+E\+C\+T\+O\+R\+\_\+\+E\+ND. 

A Testing wrapper that tests erasing F\+L\+A\+S\+H\+\_\+\+S\+E\+C\+T\+O\+R\+\_\+\+Z\+E\+R\+O\+\_\+\+A\+\_\+\+C\+O\+DE and F\+L\+A\+S\+H\+\_\+\+S\+E\+C\+T\+O\+R\+\_\+\+Z\+E\+R\+O\+\_\+\+B\+\_\+\+C\+O\+DE.


\begin{DoxyParams}{Parameters}
{\em buffer\+In} & One of the two testing buffers -\/$>$ Should be size of B\+Y\+T\+E\+S\+\_\+\+P\+E\+R\+\_\+\+P\+A\+GE \\
\hline
{\em buffer\+Out} & One of the two testing buffers -\/$>$ Should be size of B\+Y\+T\+E\+S\+\_\+\+P\+E\+R\+\_\+\+P\+A\+GE \\
\hline
{\em buffer\+Size} & Should always be B\+Y\+T\+E\+S\+\_\+\+P\+E\+R\+\_\+\+P\+A\+GE \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Test Status 
\end{DoxyReturn}
\index{flash\+\_\+test.\+c@{flash\+\_\+test.\+c}!flash\+Init\+Test@{flash\+Init\+Test}}
\index{flash\+Init\+Test@{flash\+Init\+Test}!flash\+\_\+test.\+c@{flash\+\_\+test.\+c}}
\subsubsection[{\texorpdfstring{flash\+Init\+Test(void)}{flashInitTest(void)}}]{\setlength{\rightskip}{0pt plus 5cm}flash\+Init\+Test (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}\hypertarget{flash__test_8c_a62c30fbf29b6efe375db42d1bc52a937}{}\label{flash__test_8c_a62c30fbf29b6efe375db42d1bc52a937}


A Testing wrapper that tests flash init (reading manf id\textquotesingle{}s) T\+H\+IS T\+E\+ST M\+U\+ST BE R\+UN -\/$>$ Sets up S\+PI. 

\begin{DoxyReturn}{Returns}
Test Status 
\end{DoxyReturn}
\index{flash\+\_\+test.\+c@{flash\+\_\+test.\+c}!flash\+Write\+Read\+Offset\+Test@{flash\+Write\+Read\+Offset\+Test}}
\index{flash\+Write\+Read\+Offset\+Test@{flash\+Write\+Read\+Offset\+Test}!flash\+\_\+test.\+c@{flash\+\_\+test.\+c}}
\subsubsection[{\texorpdfstring{flash\+Write\+Read\+Offset\+Test(uint8\+\_\+t $\ast$buffer\+In, uint8\+\_\+t $\ast$buffer\+Out, uint16\+\_\+t buffer\+Size)}{flashWriteReadOffsetTest(uint8_t *bufferIn, uint8_t *bufferOut, uint16_t bufferSize)}}]{\setlength{\rightskip}{0pt plus 5cm}flash\+Write\+Read\+Offset\+Test (
\begin{DoxyParamCaption}
\item[{uint8\+\_\+t $\ast$}]{buffer\+In, }
\item[{uint8\+\_\+t $\ast$}]{buffer\+Out, }
\item[{uint16\+\_\+t}]{buffer\+Size}
\end{DoxyParamCaption}
)}\hypertarget{flash__test_8c_a5d02757412b04bd353a2af39e1aeaf2f}{}\label{flash__test_8c_a5d02757412b04bd353a2af39e1aeaf2f}


A Testing wrapper that tests page write, and page read. Uses buffer\+Size / N\+O\+D\+E\+\_\+\+S\+I\+Z\+E\+\_\+\+P\+A\+R\+E\+NT for offset calculation. 


\begin{DoxyParams}{Parameters}
{\em buffer\+In} & One of the two testing buffers -\/$>$ Should be size of B\+Y\+T\+E\+S\+\_\+\+P\+E\+R\+\_\+\+P\+A\+GE \\
\hline
{\em buffer\+Out} & One of the two testing buffers -\/$>$ Should be size of B\+Y\+T\+E\+S\+\_\+\+P\+E\+R\+\_\+\+P\+A\+GE \\
\hline
{\em buffer\+Size} & Should always be B\+Y\+T\+E\+S\+\_\+\+P\+E\+R\+\_\+\+P\+A\+GE \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Test Status 
\end{DoxyReturn}
\index{flash\+\_\+test.\+c@{flash\+\_\+test.\+c}!flash\+Write\+Read\+Test@{flash\+Write\+Read\+Test}}
\index{flash\+Write\+Read\+Test@{flash\+Write\+Read\+Test}!flash\+\_\+test.\+c@{flash\+\_\+test.\+c}}
\subsubsection[{\texorpdfstring{flash\+Write\+Read\+Test(uint8\+\_\+t $\ast$buffer\+In, uint8\+\_\+t $\ast$buffer\+Out, uint16\+\_\+t buffer\+Size)}{flashWriteReadTest(uint8_t *bufferIn, uint8_t *bufferOut, uint16_t bufferSize)}}]{\setlength{\rightskip}{0pt plus 5cm}flash\+Write\+Read\+Test (
\begin{DoxyParamCaption}
\item[{uint8\+\_\+t $\ast$}]{buffer\+In, }
\item[{uint8\+\_\+t $\ast$}]{buffer\+Out, }
\item[{uint16\+\_\+t}]{buffer\+Size}
\end{DoxyParamCaption}
)}\hypertarget{flash__test_8c_a7e0002ca7fbfefed8e480ff6b842ba9c}{}\label{flash__test_8c_a7e0002ca7fbfefed8e480ff6b842ba9c}


A Testing wrapper that tests page write, and page read. 


\begin{DoxyParams}{Parameters}
{\em buffer\+In} & One of the two testing buffers -\/$>$ Should be size of B\+Y\+T\+E\+S\+\_\+\+P\+E\+R\+\_\+\+P\+A\+GE \\
\hline
{\em buffer\+Out} & One of the two testing buffers -\/$>$ Should be size of B\+Y\+T\+E\+S\+\_\+\+P\+E\+R\+\_\+\+P\+A\+GE \\
\hline
{\em buffer\+Size} & Should always be B\+Y\+T\+E\+S\+\_\+\+P\+E\+R\+\_\+\+P\+A\+GE \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Test Status 
\end{DoxyReturn}
\index{flash\+\_\+test.\+c@{flash\+\_\+test.\+c}!init\+Buffer@{init\+Buffer}}
\index{init\+Buffer@{init\+Buffer}!flash\+\_\+test.\+c@{flash\+\_\+test.\+c}}
\subsubsection[{\texorpdfstring{init\+Buffer(uint8\+\_\+t $\ast$buffer, uint16\+\_\+t buffer\+Size, uint8\+\_\+t policy)}{initBuffer(uint8_t *buffer, uint16_t bufferSize, uint8_t policy)}}]{\setlength{\rightskip}{0pt plus 5cm}init\+Buffer (
\begin{DoxyParamCaption}
\item[{uint8\+\_\+t $\ast$}]{buffer, }
\item[{uint16\+\_\+t}]{buffer\+Size, }
\item[{uint8\+\_\+t}]{policy}
\end{DoxyParamCaption}
)}\hypertarget{flash__test_8c_a52033c01e5f93df36ece5634fbbd1cfe}{}\label{flash__test_8c_a52033c01e5f93df36ece5634fbbd1cfe}


A helper function that populates a buffer. 


\begin{DoxyParams}{Parameters}
{\em buffer} & The buffer to populate \\
\hline
{\em buffer\+Size} & The size of the buffer \\
\hline
{\em policy} & The population policy. (All Ones, All Zeros, Random, Increment) \\
\hline
\end{DoxyParams}
